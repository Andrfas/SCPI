<?xml version="1.0" encoding="UTF-8"?>
<project name="scpi" default="compile">
  
  <path id="project_classpath">
    <fileset dir="${basedir}/resources" includes="*.jar"/>
  </path>

  <path id="instrument_classpath">
    <pathelement location="out/production/SCPI"/>
    <path location="${basedir}/resources/activejdbc-instrumentation-1.4.9.jar"/>
    <path location="${basedir}/resources/javassist.jar"/>
    <path location="${basedir}/resources/activejdbc-1.4.9.jar"/>
  </path>

  <target name="compile">
    <javac includeantruntime="false" srcdir="src" destdir="out/production/SCPI" classpathref="project_classpath"/>
  </target>

  <target name="instrument" depends="compile">
    <java classname="org.javalite.instrumentation.Main">
      <sysproperty key="outputDirectory" value="out/production/SCPI"/>
      <classpath refid="instrument_classpath"/>
    </java>
  </target>

  <target name="deploy" depends="compile, instrument">
    <copy todir="C:\apache-tomcat-8.0.15\webapps\SCPI">
      <fileset dir="src/web/view"/>
    </copy>
    <copy todir="C:\apache-tomcat-8.0.15\webapps\SCPI\WEB-INF">
      <fileset dir="out/production/SCPI"/>
    </copy>
  </target>
</project>